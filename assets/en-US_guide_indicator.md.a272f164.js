import{_ as s,o as n,c as a,V as l}from"./chunks/framework.410404a1.js";const d=JSON.parse('{"title":"Technical indicator","description":"","frontmatter":{},"headers":[],"relativePath":"en-US/guide/indicator.md","filePath":"en-US/guide/indicator.md","lastUpdated":1688312731000}'),p={name:"en-US/guide/indicator.md"},o=l(`<h1 id="technical-indicator" tabindex="-1">Technical indicator <a class="header-anchor" href="#technical-indicator" aria-label="Permalink to &quot;Technical indicator&quot;">​</a></h1><p>This document introduces the built-in technical indicators in the chart and how to customize a technical indicator.</p><h2 id="built-in-technical-indicators" tabindex="-1">Built-in technical indicators <a class="header-anchor" href="#built-in-technical-indicators" aria-label="Permalink to &quot;Built-in technical indicators&quot;">​</a></h2><table><thead><tr><th style="text-align:center;"><strong>Name</strong></th><th style="text-align:center;"><strong>Default calc params</strong></th><th style="text-align:center;"><strong>Name</strong></th><th style="text-align:center;"><strong>Default calc params</strong></th><th style="text-align:center;"><strong>Name</strong></th><th style="text-align:center;"><strong>Default calc params</strong></th></tr></thead><tbody><tr><td style="text-align:center;">MA</td><td style="text-align:center;">[5, 10, 30, 60]</td><td style="text-align:center;">BIAS</td><td style="text-align:center;">[6, 12, 24]</td><td style="text-align:center;">VR</td><td style="text-align:center;">[24, 30]</td></tr><tr><td style="text-align:center;">EMA</td><td style="text-align:center;">[6, 12, 20]</td><td style="text-align:center;">BRAR</td><td style="text-align:center;">[26]</td><td style="text-align:center;">WR</td><td style="text-align:center;">[6, 10, 14]</td></tr><tr><td style="text-align:center;">SMA</td><td style="text-align:center;">[12, 2]</td><td style="text-align:center;">CCI</td><td style="text-align:center;">[13]</td><td style="text-align:center;">MTM</td><td style="text-align:center;">[6, 10]</td></tr><tr><td style="text-align:center;">BBI</td><td style="text-align:center;">[3, 6, 12, 24]</td><td style="text-align:center;">DMI</td><td style="text-align:center;">[14, 6]</td><td style="text-align:center;">EMV</td><td style="text-align:center;">[14, 9]</td></tr><tr><td style="text-align:center;">VOL</td><td style="text-align:center;">[5, 10, 20]</td><td style="text-align:center;">CR</td><td style="text-align:center;">[26, 10, 20, 40, 60]</td><td style="text-align:center;">SAR</td><td style="text-align:center;">[2, 2, 20]</td></tr><tr><td style="text-align:center;">MACD</td><td style="text-align:center;">[12, 26, 9]</td><td style="text-align:center;">PSY</td><td style="text-align:center;">[12, 6]</td><td style="text-align:center;">AO</td><td style="text-align:center;">[5, 34]</td></tr><tr><td style="text-align:center;">BOLL</td><td style="text-align:center;">[20]</td><td style="text-align:center;">DMA</td><td style="text-align:center;">[10, 50, 10]</td><td style="text-align:center;">ROC</td><td style="text-align:center;">[12, 6]</td></tr><tr><td style="text-align:center;">KDJ</td><td style="text-align:center;">[9, 3, 3]</td><td style="text-align:center;">TRIX</td><td style="text-align:center;">[12, 20]</td><td style="text-align:center;">PVT</td><td style="text-align:center;">None</td></tr><tr><td style="text-align:center;">RSI</td><td style="text-align:center;">[6, 12, 24]</td><td style="text-align:center;">OBV</td><td style="text-align:center;">[30]</td><td style="text-align:center;">AVP</td><td style="text-align:center;">None</td></tr></tbody></table><h2 id="custom-technical-indicators" tabindex="-1">Custom Technical Indicators <a class="header-anchor" href="#custom-technical-indicators" aria-label="Permalink to &quot;Custom Technical Indicators&quot;">​</a></h2><p>To create a custom technical indicator, you only need to generate a technical indicator information, and then add it globally through <code>klinecharts.registerIndicator</code>, add it to the chart and use it like the built-in technical indicator.</p><h3 id="attribute-description" tabindex="-1">Attribute description <a class="header-anchor" href="#attribute-description" aria-label="Permalink to &quot;Attribute description&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight vp-code-dark"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// indicator name</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">name</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">string</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// The short name of the indicator, used for display, the name will be displayed by default</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">shortName</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">string</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// precision, default is 4</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">precision</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">number</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// calculation parameter</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">calcParams</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">any</span><span style="color:#F07178;">[]</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// Do you need ohlc</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">shouldOhlc</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">boolean</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// Do you need to format large data values, starting from 1000, for example, do you need to format 100K for 100000</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">shouldFormatBigNumber</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">boolean</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// Do you need visible</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">visible</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">boolean</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// extended data</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">extendData</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">any</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// series, default is &#39;normal&#39;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">series</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">normal</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">|</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">price</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">|</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">volume</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// Data information</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">figures</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Array</span><span style="color:#89DDFF;">&lt;{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// Used to get the median value of the calculation result</span></span>
<span class="line"><span style="color:#F07178;">    key</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// for tooltip display</span></span>
<span class="line"><span style="color:#F07178;">    title</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// graphic type</span></span>
<span class="line"><span style="color:#F07178;">    type</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// Base value, if given, it will be drawn up and down with this value, generally used when the type is &#39;rect&#39;</span></span>
<span class="line"><span style="color:#F07178;">    baseValue</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// is a method</span></span>
<span class="line"><span style="color:#F07178;">    attrs</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      coordinate</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">IndicatorFigureAttrsCallbackCoordinate</span></span>
<span class="line"><span style="color:#F07178;">      bounding</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Bounding</span></span>
<span class="line"><span style="color:#F07178;">      barSpace</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">BarSpace</span></span>
<span class="line"><span style="color:#F07178;">      xAxis</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">XAxis</span></span>
<span class="line"><span style="color:#F07178;">      yAxis</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">YAxis</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">) </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">IndicatorFigureAttrs</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// is a method</span></span>
<span class="line"><span style="color:#F07178;">    styles</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;font-style:italic;">data</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// The data of the previous graph</span></span>
<span class="line"><span style="color:#F07178;">        prev</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">// k-line data, type refer to [data source]</span></span>
<span class="line"><span style="color:#F07178;">          kLineData</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">KLineData</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">// technical indicator data</span></span>
<span class="line"><span style="color:#F07178;">          indicatorData</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">any</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// data of the current graph</span></span>
<span class="line"><span style="color:#F07178;">        current</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">          kLineData</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">KLineData</span></span>
<span class="line"><span style="color:#F07178;">          indicatorData</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">any</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// Data for the next graph</span></span>
<span class="line"><span style="color:#F07178;">        next</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">          kLineData</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">KLineData</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">          indicatorData</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">any</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// technical chart example</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;font-style:italic;">indicator</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Indicator</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// The default technical indicator style, that is, the technical indicator style set globally, refer to the indicator in [Style]</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;font-style:italic;">defaultStyles</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">IndicatorStyle</span></span>
<span class="line"><span style="color:#F07178;">    ) </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">IndicatorFigureStyle</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}&gt;,</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// The specified minimum value, default null</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">minValue</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">number</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// The specified maximum value, default null</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">maxValue</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">number</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// style, support increment, default is null, type refer to indicator in [style]</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">styles</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">IndicatorStyle</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// calculation method, can be a promise</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">calc</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// data source, see [data source] for type</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">dataList</span><span style="color:#F07178;">: </span><span style="color:#A6ACCD;">KLineData</span><span style="color:#F07178;">[]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// technical indicator example</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">indicator</span><span style="color:#F07178;">: </span><span style="color:#A6ACCD;">indicator</span></span>
<span class="line"><span style="color:#F07178;">  ) </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">Array</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">any</span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">|</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Array</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">any</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// Regenerate figure graphic configuration method, which will be triggered after the calculation parameters change, refer to figures for the return type, the default is null</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">regenerateFigures</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// calculation parameter</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">calcParms</span><span style="color:#F07178;">: </span><span style="color:#A6ACCD;">any</span><span style="color:#F07178;">[]</span></span>
<span class="line"><span style="color:#F07178;">  ) </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Array</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">IndicatorFigure</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">D</span><span style="color:#89DDFF;">&gt;&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// Create a custom hint text</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">createTooltipDataSource</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">params</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// data source, see [data source] for type</span></span>
<span class="line"><span style="color:#F07178;">    kLineDataList</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">KLineData</span><span style="color:#F07178;">[]</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// technical indicator example</span></span>
<span class="line"><span style="color:#F07178;">    indicator</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Indicator</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// Visible area information</span></span>
<span class="line"><span style="color:#F07178;">    visibleRange</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// start data index</span></span>
<span class="line"><span style="color:#F07178;">      from</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// end data index</span></span>
<span class="line"><span style="color:#F07178;">      to</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// real start data index</span></span>
<span class="line"><span style="color:#F07178;">      realFrom</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// real end data index</span></span>
<span class="line"><span style="color:#F07178;">      realTo</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// window size information</span></span>
<span class="line"><span style="color:#F07178;">    bounding</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// width</span></span>
<span class="line"><span style="color:#F07178;">      width</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// high</span></span>
<span class="line"><span style="color:#F07178;">      height</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// distance to the left</span></span>
<span class="line"><span style="color:#F07178;">      left</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// distance to the right</span></span>
<span class="line"><span style="color:#F07178;">      right</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// distance from top</span></span>
<span class="line"><span style="color:#F07178;">      top</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// distance from bottom</span></span>
<span class="line"><span style="color:#F07178;">      bottom</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// Information about the cross cursor</span></span>
<span class="line"><span style="color:#F07178;">    crosshair</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// The window id where the cross point of the cross cursor is located</span></span>
<span class="line"><span style="color:#F07178;">      paneId</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// real x coordinate</span></span>
<span class="line"><span style="color:#F07178;">      realX</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// k-line data, type refer to [data source]</span></span>
<span class="line"><span style="color:#F07178;">      kLineData</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">KLineData</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// data index</span></span>
<span class="line"><span style="color:#F07178;">      dataIndex</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// real data index</span></span>
<span class="line"><span style="color:#F07178;">      realDataIndex</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// The default technical indicator style, that is, the technical indicator style set globally, refer to the indicator in [Style]</span></span>
<span class="line"><span style="color:#F07178;">    defaultStyles</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">IndicatorStyle</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// x-axis component, some built-in conversion methods</span></span>
<span class="line"><span style="color:#F07178;">    xAxis</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">XAxis</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// y-axis component, with some built-in conversion methods</span></span>
<span class="line"><span style="color:#F07178;">    yAxis</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">YAxis</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">})</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// name</span></span>
<span class="line"><span style="color:#F07178;">    name?</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">string</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// Calculate the parameter text, if name has no value, it will not be displayed</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">calcParamsText</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">string</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// value information</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">values</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Array</span><span style="color:#89DDFF;">&lt;{</span></span>
<span class="line"><span style="color:#F07178;">      title</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">|</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        text</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span></span>
<span class="line"><span style="color:#F07178;">        color</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">      value</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">|</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        text</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span></span>
<span class="line"><span style="color:#F07178;">        color</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}&gt;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// Custom drawing, if true is returned, the graphics configured by figures will not be drawn</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">draw</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">params</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// canvas context</span></span>
<span class="line"><span style="color:#F07178;">    ctx</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">CanvasRenderingContext2D</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// data source, see [data source] for type</span></span>
<span class="line"><span style="color:#F07178;">    kLineDataList</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">KLineData</span><span style="color:#F07178;">[]</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// technical indicator example</span></span>
<span class="line"><span style="color:#F07178;">    indicator</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Indicator</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// Visible area information</span></span>
<span class="line"><span style="color:#F07178;">    visibleRange</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// start data index</span></span>
<span class="line"><span style="color:#F07178;">      from</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// endpoint data index</span></span>
<span class="line"><span style="color:#F07178;">      to</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// window size information</span></span>
<span class="line"><span style="color:#F07178;">    bounding</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// width</span></span>
<span class="line"><span style="color:#F07178;">      width</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// high</span></span>
<span class="line"><span style="color:#F07178;">      height</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// distance to the left</span></span>
<span class="line"><span style="color:#F07178;">      left</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// distance to the right</span></span>
<span class="line"><span style="color:#F07178;">      right</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// distance from top</span></span>
<span class="line"><span style="color:#F07178;">      top</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// distance from bottom</span></span>
<span class="line"><span style="color:#F07178;">      bottom</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// information about the size of the candlestick</span></span>
<span class="line"><span style="color:#F07178;">    barSpace</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// candlestick size</span></span>
<span class="line"><span style="color:#F07178;">      bar</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#F07178;">      halfBar</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// candlesticks do not include dimensions of gaps between candlesticks</span></span>
<span class="line"><span style="color:#F07178;">      gapBar</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#F07178;">      halfGapBar</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// The default technical indicator style, that is, the technical indicator style set globally, refer to the indicator in [Style]</span></span>
<span class="line"><span style="color:#F07178;">    defaultStyles</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">IndicatorStyle</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// x-axis component, some built-in conversion methods</span></span>
<span class="line"><span style="color:#F07178;">    xAxis</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">XAxis</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// y-axis component, with some built-in conversion methods</span></span>
<span class="line"><span style="color:#F07178;">    yAxis</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">YAxis</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">})</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">boolean</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// indicator name</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">name</span><span style="color:#24292E;">: string</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// The short name of the indicator, used for display, the name will be displayed by default</span></span>
<span class="line"><span style="color:#24292E;">  shortName</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> string</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// precision, default is 4</span></span>
<span class="line"><span style="color:#24292E;">  precision</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> number</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// calculation parameter</span></span>
<span class="line"><span style="color:#24292E;">  calcParams</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> any[]</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// Do you need ohlc</span></span>
<span class="line"><span style="color:#24292E;">  shouldOhlc</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> boolean</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// Do you need to format large data values, starting from 1000, for example, do you need to format 100K for 100000</span></span>
<span class="line"><span style="color:#24292E;">  shouldFormatBigNumber</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> boolean</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// Do you need visible</span></span>
<span class="line"><span style="color:#24292E;">  visible</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> boolean</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// extended data</span></span>
<span class="line"><span style="color:#24292E;">  extendData</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> any</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// series, default is &#39;normal&#39;</span></span>
<span class="line"><span style="color:#24292E;">  series</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;normal&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;price&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;volume&#39;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// Data information</span></span>
<span class="line"><span style="color:#24292E;">  figures</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Array</span><span style="color:#24292E;">&lt;{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// Used to get the median value of the calculation result</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">key</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// for tooltip display</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">title</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// graphic type</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">type</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// Base value, if given, it will be drawn up and down with this value, generally used when the type is &#39;rect&#39;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">baseValue</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">number</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// is a method</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">attrs</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> ({</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">coordinate</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">IndicatorFigureAttrsCallbackCoordinate</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">bounding</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Bounding</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">barSpace</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">BarSpace</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">xAxis</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">XAxis</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">yAxis</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">YAxis</span></span>
<span class="line"><span style="color:#24292E;">    }) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">IndicatorFigureAttrs</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// is a method</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">styles</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">data</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// The data of the previous graph</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#E36209;">prev</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6A737D;">// k-line data, type refer to [data source]</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#E36209;">kLineData</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">KLineData</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6A737D;">// technical indicator data</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#E36209;">indicatorData</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">any</span></span>
<span class="line"><span style="color:#24292E;">        },</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// data of the current graph</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#E36209;">current</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#E36209;">kLineData</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">KLineData</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#E36209;">indicatorData</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">any</span></span>
<span class="line"><span style="color:#24292E;">        },</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// Data for the next graph</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#E36209;">next</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#E36209;">kLineData</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">KLineData</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#E36209;">indicatorData</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">any</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">      },</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// technical chart example</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">indicator</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Indicator</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// The default technical indicator style, that is, the technical indicator style set globally, refer to the indicator in [Style]</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">defaultStyles</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">IndicatorStyle</span></span>
<span class="line"><span style="color:#24292E;">    ) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">IndicatorFigureStyle</span></span>
<span class="line"><span style="color:#24292E;">  }&gt;,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// The specified minimum value, default null</span></span>
<span class="line"><span style="color:#24292E;">  minValue</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> number</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// The specified maximum value, default null</span></span>
<span class="line"><span style="color:#24292E;">  maxValue</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> number</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// style, support increment, default is null, type refer to indicator in [style]</span></span>
<span class="line"><span style="color:#24292E;">  styles</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> IndicatorStyle</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// calculation method, can be a promise</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">calc</span><span style="color:#24292E;">: (</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// data source, see [data source] for type</span></span>
<span class="line"><span style="color:#24292E;">    dataList: KLineData[],</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// technical indicator example</span></span>
<span class="line"><span style="color:#24292E;">    indicator: indicator</span></span>
<span class="line"><span style="color:#24292E;">  ) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">Promise</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">Array</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">any</span><span style="color:#D73A49;">&gt;&gt;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> Array</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">any</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// Regenerate figure graphic configuration method, which will be triggered after the calculation parameters change, refer to figures for the return type, the default is null</span></span>
<span class="line"><span style="color:#24292E;">  regenerateFigures</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// calculation parameter</span></span>
<span class="line"><span style="color:#24292E;">    calcParms: any[]</span></span>
<span class="line"><span style="color:#24292E;">  ) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> Array</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">IndicatorFigure</span><span style="color:#D73A49;">&lt;</span><span style="color:#005CC5;">D</span><span style="color:#D73A49;">&gt;&gt;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// Create a custom hint text</span></span>
<span class="line"><span style="color:#24292E;">  createTooltipDataSource</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">params</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// data source, see [data source] for type</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">kLineDataList</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">KLineData</span><span style="color:#24292E;">[]</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// technical indicator example</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">indicator</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Indicator</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// Visible area information</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">visibleRange</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// start data index</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">from</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">number</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// end data index</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">to</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">number</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// real start data index</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">realFrom</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">number</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// real end data index</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">realTo</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">number</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// window size information</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">bounding</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// width</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">width</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">number</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// high</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">height</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">number</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// distance to the left</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">left</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">number</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// distance to the right</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">right</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">number</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// distance from top</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">top</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">number</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// distance from bottom</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">bottom</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">number</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// Information about the cross cursor</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">crosshair</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// The window id where the cross point of the cross cursor is located</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">paneId</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// real x coordinate</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">realX</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">number</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// k-line data, type refer to [data source]</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">kLineData</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">KLineData</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// data index</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">dataIndex</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">number</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// real data index</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">realDataIndex</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">number</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// The default technical indicator style, that is, the technical indicator style set globally, refer to the indicator in [Style]</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">defaultStyles</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">IndicatorStyle</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// x-axis component, some built-in conversion methods</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">xAxis</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">XAxis</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// y-axis component, with some built-in conversion methods</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">yAxis</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">YAxis</span></span>
<span class="line"><span style="color:#24292E;">  }) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> ({</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// name</span></span>
<span class="line"><span style="color:#24292E;">    name?: string</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// Calculate the parameter text, if name has no value, it will not be displayed</span></span>
<span class="line"><span style="color:#24292E;">    calcParamsText</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> string</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// value information</span></span>
<span class="line"><span style="color:#24292E;">    values</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Array</span><span style="color:#24292E;">&lt;{</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">title</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#E36209;">text</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#E36209;">color</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">value</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#E36209;">text</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#E36209;">color</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    }&gt;</span></span>
<span class="line"><span style="color:#24292E;">  }),</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// Custom drawing, if true is returned, the graphics configured by figures will not be drawn</span></span>
<span class="line"><span style="color:#24292E;">  draw</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">params</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// canvas context</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">ctx</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">CanvasRenderingContext2D</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// data source, see [data source] for type</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">kLineDataList</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">KLineData</span><span style="color:#24292E;">[]</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// technical indicator example</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">indicator</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Indicator</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// Visible area information</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">visibleRange</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// start data index</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">from</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">number</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// endpoint data index</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">to</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">number</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// window size information</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">bounding</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// width</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">width</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">number</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// high</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">height</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">number</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// distance to the left</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">left</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">number</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// distance to the right</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">right</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">number</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// distance from top</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">top</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">number</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// distance from bottom</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">bottom</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">number</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// information about the size of the candlestick</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">barSpace</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// candlestick size</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">bar</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">number</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">halfBar</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">number</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// candlesticks do not include dimensions of gaps between candlesticks</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">gapBar</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">number</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#E36209;">halfGapBar</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">number</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// The default technical indicator style, that is, the technical indicator style set globally, refer to the indicator in [Style]</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">defaultStyles</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">IndicatorStyle</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// x-axis component, some built-in conversion methods</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">xAxis</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">XAxis</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// y-axis component, with some built-in conversion methods</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">yAxis</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">YAxis</span></span>
<span class="line"><span style="color:#24292E;">  }) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> boolean</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h4 id="step-1" tabindex="-1">Step.1 <a class="header-anchor" href="#step-1" aria-label="Permalink to &quot;Step.1&quot;">​</a></h4><p>First determine the calculation parameters (calcParams) and configuration items (figures). The &#39;MA&#39; technical indicator needs to display the line connecting the average closing price of the two periods, one is &#39;ma1&#39; and the other is &#39;ma2&#39;. So figures are configured as:</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight vp-code-dark"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">   </span><span style="color:#676E95;font-style:italic;">// The calculation parameters are 2, one calculates the mean value of 5 cycle times, namely &#39;ma1&#39;, and the other calculates the mean value of 10 cycle times, namely &#39;ma10&#39;</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#FFCB6B;">calcParams</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> [</span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">10</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#FFCB6B;">figures</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">     </span><span style="color:#676E95;font-style:italic;">// first line &#39;ma5&#39;</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> key</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ma1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> title</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">MA5: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> type</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">line</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">     </span><span style="color:#676E95;font-style:italic;">// second line &#39;ma10&#39;</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> key</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ma2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> title</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">MA10: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> type</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">line</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">   ]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6A737D;">// The calculation parameters are 2, one calculates the mean value of 5 cycle times, namely &#39;ma1&#39;, and the other calculates the mean value of 10 cycle times, namely &#39;ma10&#39;</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">calcParams</span><span style="color:#24292E;">: [</span><span style="color:#005CC5;">5</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">],</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">figures</span><span style="color:#24292E;">: [</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#6A737D;">// first line &#39;ma5&#39;</span></span>
<span class="line"><span style="color:#24292E;">     { key: </span><span style="color:#032F62;">&#39;ma1&#39;</span><span style="color:#24292E;">, title: </span><span style="color:#032F62;">&#39;MA5: &#39;</span><span style="color:#24292E;">, type: </span><span style="color:#032F62;">&#39;line&#39;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#6A737D;">// second line &#39;ma10&#39;</span></span>
<span class="line"><span style="color:#24292E;">     { key: </span><span style="color:#032F62;">&#39;ma2&#39;</span><span style="color:#24292E;">, title: </span><span style="color:#032F62;">&#39;MA10: &#39;</span><span style="color:#24292E;">, type: </span><span style="color:#032F62;">&#39;line&#39;</span><span style="color:#24292E;"> }</span></span>
<span class="line"><span style="color:#24292E;">   ]</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h4 id="step-2" tabindex="-1">Step.2 <a class="header-anchor" href="#step-2" aria-label="Permalink to &quot;Step.2&quot;">​</a></h4><p>Determine other attributes</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight vp-code-dark"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#FFCB6B;">name</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">MA</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#FFCB6B;">shortName</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">MA</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#FFCB6B;">calcParams</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> [</span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">10</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#FFCB6B;">figures</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> [</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> key</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ma1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> title</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">MA5: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> type</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">line</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> key</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ma2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> title</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">MA10: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> type</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">line</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">   ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">   </span><span style="color:#676E95;font-style:italic;">// When the calculation parameters are changed, it is hoped that the prompt is the same as the parameters, that is, the value of title needs to be changed</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#FFCB6B;">regenerateFigures</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">params</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">params</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">map</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">p</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">i</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">       </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> key</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">ma</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">i </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">}\`</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> title</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">MA</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">p</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">: </span><span style="color:#89DDFF;">\`</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> type</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">line</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">   </span><span style="color:#676E95;font-style:italic;">// Calculation results</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#FFCB6B;">calc</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">kLineDataList</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">calcParams</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">figures</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">})</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">     </span><span style="color:#676E95;font-style:italic;">// Note: The number of returned data needs to be consistent with the number of data in kLineDataList. If there is no value, replace it with {}.</span></span>
<span class="line"><span style="color:#89DDFF;">     </span><span style="color:#676E95;font-style:italic;">// It is best to take the callback parameter calcParams as the calculation parameter. If not, when the subsequent calculation parameters change, the calculation here cannot respond in time</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">closeSums</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> []</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">kLineDataList</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">map</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">kLineData</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">i</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">       </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ma</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#F07178;">       </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">close</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">kLineData</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">close</span></span>
<span class="line"><span style="color:#F07178;">       </span><span style="color:#A6ACCD;">calcParams</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">param</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">j</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#A6ACCD;">closeSums</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">j</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">closeSums</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">j</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">close</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">param</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">           </span><span style="color:#A6ACCD;">ma</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">figures</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">j</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">closeSums</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">j</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">/</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">param</span></span>
<span class="line"><span style="color:#F07178;">           </span><span style="color:#A6ACCD;">closeSums</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">j</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">-=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">kLineDataList</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">param</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">)]</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">close</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">       </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">       </span><span style="color:#676E95;font-style:italic;">// If there is a value, the data format of each item here should be { ma1: xxx, ma2: xxx }</span></span>
<span class="line"><span style="color:#89DDFF;">       </span><span style="color:#676E95;font-style:italic;">// Each key needs to be consistent with the value corresponding to the subkey in figures</span></span>
<span class="line"><span style="color:#F07178;">       </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ma</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;MA&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">shortName</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;MA&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">calcParams</span><span style="color:#24292E;">: [</span><span style="color:#005CC5;">5</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">],</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">figures</span><span style="color:#24292E;">: [</span></span>
<span class="line"><span style="color:#24292E;">     { key: </span><span style="color:#032F62;">&#39;ma1&#39;</span><span style="color:#24292E;">, title: </span><span style="color:#032F62;">&#39;MA5: &#39;</span><span style="color:#24292E;">, type: </span><span style="color:#032F62;">&#39;line&#39;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">     { key: </span><span style="color:#032F62;">&#39;ma2&#39;</span><span style="color:#24292E;">, title: </span><span style="color:#032F62;">&#39;MA10: &#39;</span><span style="color:#24292E;">, type: </span><span style="color:#032F62;">&#39;line&#39;</span><span style="color:#24292E;"> }</span></span>
<span class="line"><span style="color:#24292E;">   ],</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6A737D;">// When the calculation parameters are changed, it is hoped that the prompt is the same as the parameters, that is, the value of title needs to be changed</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">regenerateFigures</span><span style="color:#24292E;">: (</span><span style="color:#E36209;">params</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> params. </span><span style="color:#6F42C1;">map</span><span style="color:#24292E;">((</span><span style="color:#E36209;">p</span><span style="color:#24292E;">, </span><span style="color:#E36209;">i</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">       </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> { key: </span><span style="color:#032F62;">\`ma\${</span><span style="color:#24292E;">i</span><span style="color:#032F62;"> </span><span style="color:#D73A49;">+</span><span style="color:#032F62;"> </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">}\`</span><span style="color:#24292E;">, title: </span><span style="color:#032F62;">\`MA\${</span><span style="color:#24292E;">p</span><span style="color:#032F62;">}: \`</span><span style="color:#24292E;">, type: </span><span style="color:#032F62;">&#39;line&#39;</span><span style="color:#24292E;"> }</span></span>
<span class="line"><span style="color:#24292E;">     })</span></span>
<span class="line"><span style="color:#24292E;">   },</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6A737D;">// Calculation results</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">calc</span><span style="color:#24292E;">: (</span><span style="color:#E36209;">kLineDataList</span><span style="color:#24292E;">, { </span><span style="color:#E36209;">calcParams</span><span style="color:#24292E;">, </span><span style="color:#E36209;">figures</span><span style="color:#24292E;"> }) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#6A737D;">// Note: The number of returned data needs to be consistent with the number of data in kLineDataList. If there is no value, replace it with {}.</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#6A737D;">// It is best to take the callback parameter calcParams as the calculation parameter. If not, when the subsequent calculation parameters change, the calculation here cannot respond in time</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">closeSums</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> []</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> kLineDataList. </span><span style="color:#6F42C1;">map</span><span style="color:#24292E;">((</span><span style="color:#E36209;">kLineData</span><span style="color:#24292E;">, </span><span style="color:#E36209;">i</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">       </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">ma</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {}</span></span>
<span class="line"><span style="color:#24292E;">       </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">close</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> kLineData. close</span></span>
<span class="line"><span style="color:#24292E;">       calcParams.</span><span style="color:#6F42C1;">forEach</span><span style="color:#24292E;">((</span><span style="color:#E36209;">param</span><span style="color:#24292E;">, </span><span style="color:#E36209;">j</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">         closeSums[j] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (closeSums[j] </span><span style="color:#D73A49;">||</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> close</span></span>
<span class="line"><span style="color:#24292E;">         </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (i </span><span style="color:#D73A49;">&gt;=</span><span style="color:#24292E;"> param </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">           ma[figures[j].key] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> closeSums[j] </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> param</span></span>
<span class="line"><span style="color:#24292E;">           closeSums[j] </span><span style="color:#D73A49;">-=</span><span style="color:#24292E;"> kLineDataList[i </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> (param </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">)].close</span></span>
<span class="line"><span style="color:#24292E;">         }</span></span>
<span class="line"><span style="color:#24292E;">       })</span></span>
<span class="line"><span style="color:#24292E;">       </span><span style="color:#6A737D;">// If there is a value, the data format of each item here should be { ma1: xxx, ma2: xxx }</span></span>
<span class="line"><span style="color:#24292E;">       </span><span style="color:#6A737D;">// Each key needs to be consistent with the value corresponding to the subkey in figures</span></span>
<span class="line"><span style="color:#24292E;">       </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> ma</span></span>
<span class="line"><span style="color:#24292E;">     })</span></span>
<span class="line"><span style="color:#24292E;">   }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>So a custom indicator is completed.</p>`,15),e=[o];function t(c,r,y,i,F,D){return n(),a("div",null,e)}const A=s(p,[["render",t]]);export{d as __pageData,A as default};
